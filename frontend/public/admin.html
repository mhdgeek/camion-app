<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Tableau de Bord Camions</title>
     <script src="/frontend/public/admin.js"></script>

     <!-- Ajouter cette ligne apr√®s la balise <head> dans admin.html -->  
<script src="config.js"></script>
<script>const API_BASE_URL = CONFIG.API_BASE_URL;</script>

     <script>
const API_BASE_URL = window.location.hostname === 'localhost' 
  ? 'http://localhost:5000/api' 
  : 'https://votre-backend.vercel.app/api';
</script>

    <link rel="stylesheet" href="../src/styles/admin.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div id="admin-app">
        <!-- Page de connexion -->
        <div id="login-page" class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <div class="login-icon">
                        <i class="fas fa-crown"></i>
                    </div>
                    <h1>Espace Administrateur</h1>
                    <p>Acc√®s s√©curis√© au tableau de bord complet</p>
                </div>
                <form id="login-form" class="login-form">
                    <div class="form-group">
                        <label for="email"><i class="fas fa-envelope"></i> Email</label>
                        <input type="email" id="email" name="email" required placeholder="admin@carriere.com">
                    </div>
                    <div class="form-group">
                        <label for="password"><i class="fas fa-key"></i> Mot de passe</label>
                        <input type="password" id="password" name="password" required placeholder="Votre mot de passe">
                    </div>
                    <button type="submit" class="btn-login">
                        <i class="fas fa-sign-in-alt"></i> Se connecter
                    </button>
                </form>
                <div id="login-message" class="message"></div>
                
                <!-- <div class="demo-credentials">
                    <h4>üîê Identifiants de d√©monstration</h4>
                    <p><strong>Email:</strong> admin@carriere.com</p>
                    <p><strong>Mot de passe:</strong> admin123</p>
                </div> -->
            </div>
        </div>

        <!-- Interface Admin -->
        <div id="admin-interface" class="admin-interface" style="display: none;">
            <!-- Header -->
            <header class="admin-header">
                <div class="admin-header-content">
                    <div class="admin-brand">
                        <div class="brand-icon">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="brand-text">
                            <h1>Tableau de Bord Admin</h1>
                            <p>Gestion compl√®te des camions</p>
                        </div>
                    </div>
                    <!-- <div class="admin-user">
                        <div class="user-info">
                            <i class="fas fa-user-shield"></i>
                            <span id="user-name">Administrateur</span>
                        </div>
                        <button id="btn-logout" class="btn-logout">
                            <i class="fas fa-sign-out-alt"></i> D√©connexion
                        </button>
                    </div> -->

                    <div class="admin-user">
    <div class="user-menu">
        <div class="user-info">
            <i class="fas fa-user-shield"></i>
            <span id="user-name">Administrateur</span>
            <i class="fas fa-chevron-down" style="font-size: 0.8rem; margin-left: 0.5rem;"></i>
        </div>
    </div>
</div>

                </div>
            </header>

            <!-- Navigation -->
            <nav class="admin-nav">
                <div class="nav-container">
                    <button class="admin-nav-btn active" data-section="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Tableau de Bord</span>
                    </button>
                    <button class="admin-nav-btn" data-section="camions">
                        <i class="fas fa-truck"></i>
                        <span>Tous les Camions</span>
                    </button>
                    <button class="admin-nav-btn" data-section="paiements">
                        <i class="fas fa-money-bill-wave"></i>
                        <span>Paiements</span>
                    </button>
                    <button class="admin-nav-btn" data-section="rapports">
                        <i class="fas fa-chart-bar"></i>
                        <span>Rapports</span>
                    </button>
                    <button class="admin-nav-btn" data-section="analytics">
                        <i class="fas fa-chart-line"></i>
                        <span>Analytics</span>
                    </button>
                </div>
            </nav>

            <!-- Contenu Principal -->
            <main class="admin-main">
                <!-- Section Tableau de Bord -->
                <section id="section-dashboard" class="admin-section active">
                    <div class="section-header">
                        <h2><i class="fas fa-tachometer-alt"></i> Tableau de Bord Global</h2>
                        <p>Vue d'ensemble compl√®te de l'activit√©</p>
                    </div>

                    <!-- KPI Principaux -->
                    <div class="kpi-grid">
                        <div class="kpi-card primary">
                            <div class="kpi-icon">
                                <i class="fas fa-truck-loading"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value" id="total-camions">0</div>
                                <div class="kpi-label">Total Camions</div>
                                <div class="kpi-trend" id="trend-camions">Depuis le d√©but</div>
                            </div>
                        </div>

                        <div class="kpi-card success">
                            <div class="kpi-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value" id="total-revenus">0 FCFA</div>
                                <div class="kpi-label">Revenus Totaux</div>
                                <div class="kpi-trend" id="trend-revenus">Cumul√©s</div>
                            </div>
                        </div>

                        <div class="kpi-card warning">
                            <div class="kpi-icon">
                                <i class="fas fa-calendar-day"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value" id="camions-jour">0</div>
                                <div class="kpi-label">Aujourd'hui</div>
                                <div class="kpi-trend" id="trend-jour">Camions entr√©s</div>
                            </div>
                        </div>

                        <div class="kpi-card info">
                            <div class="kpi-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value" id="taux-sortie">0%</div>
                                <div class="kpi-label">Taux de Sortie</div>
                                <div class="kpi-trend">Global</div>
                            </div>
                        </div>
                    </div>

                    <!-- Stats Secondaires -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-calendar-week"></i>
                            <div class="stat-content">
                                <div class="stat-value" id="camions-mois">0</div>
                                <div class="stat-label">Ce Mois</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-calendar"></i>
                            <div class="stat-content">
                                <div class="stat-value" id="camions-annee">0</div>
                                <div class="stat-label">Cette Ann√©e</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-coins"></i>
                            <div class="stat-content">
                                <div class="stat-value" id="revenus-mois">0 FCFA</div>
                                <div class="stat-label">Revenus Mois</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-piggy-bank"></i>
                            <div class="stat-content">
                                <div class="stat-value" id="revenus-annee">0 FCFA</div>
                                <div class="stat-label">Revenus Ann√©e</div>
                            </div>
                        </div>
                    </div>

                    <!-- Graphiques -->
                    <div class="charts-container">
                        <div class="chart-wrapper large">
                            <div class="chart-header">
                                <h3><i class="fas fa-chart-line"></i> √âvolution Mensuelle</h3>
                                <div class="chart-actions">
                                    <button class="btn-chart-action active" data-period="12">12M</button>
                                    <button class="btn-chart-action" data-period="6">6M</button>
                                    <button class="btn-chart-action" data-period="3">3M</button>
                                </div>
                            </div>
                            <canvas id="chart-evolution" height="300"></canvas>
                        </div>

                        <div class="chart-wrapper">
                            <div class="chart-header">
                                <h3><i class="fas fa-chart-pie"></i> R√©partition Statuts</h3>
                            </div>
                            <canvas id="chart-statuts" height="250"></canvas>
                        </div>
                    </div>
                </section>

                <!-- Section Tous les Camions -->
                <section id="section-camions" class="admin-section">
                    <div class="section-header">
                        <h2><i class="fas fa-truck"></i> Historique Complet des Camions</h2>
                        <p>Consultation d√©taill√©e de tous les mouvements</p>
                    </div>

                    <!-- Filtres Avanc√©s -->
                    <div class="filters-panel">
                        <div class="filter-group">
                            <label><i class="fas fa-calendar"></i> P√©riode</label>
                            <div class="date-range">
                                <input type="date" id="filter-date-debut" class="filter-input">
                                <span>√†</span>
                                <input type="date" id="filter-date-fin" class="filter-input">
                            </div>
                        </div>
                        <div class="filter-group">
                            <label><i class="fas fa-filter"></i> Statut</label>
                            <select id="filter-statut-camions" class="filter-select">
                                <option value="all">Tous les statuts</option>
                                <option value="en_attente">‚è≥ En attente</option>
                                <option value="charge">‚úÖ Charg√©</option>
                                <option value="paye">üí∞ √Ä payer</option>
                                <option value="sorti">üö™ Sorti</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label><i class="fas fa-search"></i> Recherche</label>
                            <input type="text" id="search-camions" placeholder="Plaque, chauffeur..." class="filter-input">
                        </div>
                        <button id="btn-apply-filters" class="btn-primary">
                            <i class="fas fa-filter"></i> Appliquer
                        </button>
                        <button id="btn-reset-filters" class="btn-secondary">
                            <i class="fas fa-redo"></i> R√©initialiser
                        </button>
                    </div>

                    <!-- Tableau des camions -->
                    <div class="table-container">
                        <div class="table-header">
                            <div class="table-info">
                                <span id="table-count">0</span> camions trouv√©s
                            </div>
                            <div class="table-actions">
                                <button class="btn-export" onclick="exporterDonnees()">
                                    <i class="fas fa-download"></i> Exporter
                                </button>
                            </div>
                        </div>
                        <div class="table-scroll">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th data-sort="plaque">Plaque <i class="fas fa-sort"></i></th>
                                        <th data-sort="chauffeur">Chauffeur <i class="fas fa-sort"></i></th>
                                        <th data-sort="dateEntree">Date Entr√©e <i class="fas fa-sort"></i></th>
                                        <th data-sort="heureArrivee">Heure Entr√©e <i class="fas fa-sort"></i></th>
                                        <th data-sort="heureDepart">Heure Sortie <i class="fas fa-sort"></i></th>
                                        <th data-sort="statut">Statut <i class="fas fa-sort"></i></th>
                                        <th data-sort="montantPaye">Montant <i class="fas fa-sort"></i></th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="camions-table-body">
                                    <!-- Donn√©es charg√©es dynamiquement -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Pagination -->
                    <div class="pagination" id="camions-pagination">
                        <!-- G√©n√©r√©e dynamiquement -->
                    </div>
                </section>

                <!-- Section Paiements -->
                <section id="section-paiements" class="admin-section">
                    <div class="section-header">
                        <h2><i class="fas fa-money-bill-wave"></i> Historique des Paiements</h2>
                        <p>Suivi complet des transactions financi√®res</p>
                    </div>

                    <!-- Stats Paiements -->
                    <div class="paiements-stats">
                        <div class="stat-item large">
                            <i class="fas fa-receipt"></i>
                            <div class="stat-content">
                                <div class="stat-value" id="total-paiements">0 FCFA</div>
                                <div class="stat-label">Total des Paiements</div>
                            </div>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-list"></i>
                            <div class="stat-content">
                                <div class="stat-value" id="nombre-paiements">0</div>
                                <div class="stat-label">Nombre de Paiements</div>
                            </div>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-calculator"></i>
                            <div class="stat-content">
                                <div class="stat-value" id="moyenne-paiement">0 FCFA</div>
                                <div class="stat-label">Moyenne par Paiement</div>
                            </div>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-arrow-up"></i>
                            <div class="stat-content">
                                <div class="stat-value" id="paiement-max">0 FCFA</div>
                                <div class="stat-label">Paiement Max</div>
                            </div>
                        </div>
                    </div>

                    <!-- Filtres Paiements -->
                    <div class="filters-panel">
                        <div class="filter-group">
                            <label><i class="fas fa-calendar"></i> P√©riode</label>
                            <div class="date-range">
                                <input type="date" id="filter-paiement-debut" class="filter-input">
                                <span>√†</span>
                                <input type="date" id="filter-paiement-fin" class="filter-input">
                            </div>
                        </div>
                        <div class="filter-group">
                            <label><i class="fas fa-search"></i> Recherche</label>
                            <input type="text" id="search-paiements" placeholder="Plaque, chauffeur..." class="filter-input">
                        </div>
                        <button id="btn-apply-paiements" class="btn-primary">
                            <i class="fas fa-filter"></i> Appliquer
                        </button>
                    </div>

                    <!-- Graphique Paiements -->
                    <div class="chart-wrapper">
                        <div class="chart-header">
                            <h3><i class="fas fa-chart-bar"></i> √âvolution des Paiements</h3>
                        </div>
                        <canvas id="chart-paiements" height="200"></canvas>
                    </div>

                    <!-- Tableau Paiements -->
                    <div class="table-container">
                        <div class="table-scroll">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Plaque</th>
                                        <th>Chauffeur</th>
                                        <th>Montant Pay√©</th>
                                        <th>Heure Sortie</th>
                                        <th>Dur√©e S√©jour</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="paiements-table-body">
                                    <!-- Donn√©es charg√©es dynamiquement -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="pagination" id="paiements-pagination">
                        <!-- G√©n√©r√©e dynamiquement -->
                    </div>
                </section>

                <!-- Section Rapports -->
                <section id="section-rapports" class="admin-section">
                    <div class="section-header">
                        <h2><i class="fas fa-chart-bar"></i> Rapports D√©taill√©s</h2>
                        <p>G√©n√©ration de rapports personnalis√©s par p√©riode</p>
                    </div>

                    <div class="rapports-grid">
                        <div class="rapport-card">
                            <div class="rapport-header">
                                <i class="fas fa-file-alt"></i>
                                <h3>Rapport Journalier</h3>
                            </div>
                            <div class="rapport-body">
                                <p>G√©n√©rer un rapport complet pour une date sp√©cifique</p>
                                <div class="date-selector">
                                    <input type="date" id="rapport-date" class="filter-input">
                                    <button id="btn-generer-rapport" class="btn-primary">
                                        <i class="fas fa-download"></i> G√©n√©rer
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="rapport-card">
                            <div class="rapport-header">
                                <i class="fas fa-chart-pie"></i>
                                <h3>Statistiques Avanc√©es</h3>
                            </div>
                            <div class="rapport-body">
                                <p>Analyses d√©taill√©es par p√©riode</p>
                                <select id="rapport-periode" class="filter-select">
                                    <option value="jour">Journalier</option>
                                    <option value="semaine">Hebdomadaire</option>
                                    <option value="mois">Mensuel</option>
                                    <option value="annee">Annuel</option>
                                </select>
                                <button id="btn-stats-avancees" class="btn-primary">
                                    <i class="fas fa-chart-line"></i> Voir
                                </button>
                            </div>
                        </div>
                    </div>

                    <div id="rapport-content" class="rapport-content">
                        <div class="message info">
                            <i class="fas fa-info-circle"></i>
                            S√©lectionnez une option pour g√©n√©rer un rapport
                        </div>
                    </div>
                </section>

                <!-- Section Analytics -->
                <section id="section-analytics" class="admin-section">
                    <div class="section-header">
                        <h2><i class="fas fa-chart-line"></i> Analytics Avanc√©s</h2>
                        <p>Analyses d√©taill√©es et tendances</p>
                    </div>

                    <div class="analytics-grid">
                        <div class="analytics-card large">
                            <div class="analytics-header">
                                <h3><i class="fas fa-trend-up"></i> Performance Quotidienne</h3>
                            </div>
                            <canvas id="chart-performance" height="300"></canvas>
                        </div>

                        <div class="analytics-card">
                            <div class="analytics-header">
                                <h3><i class="fas fa-users"></i> Top Chauffeurs</h3>
                            </div>
                            <div id="top-chauffeurs" class="analytics-list">
                                <!-- Liste dynamique -->
                            </div>
                        </div>

                        <div class="analytics-card">
                            <div class="analytics-header">
                                <h3><i class="fas fa-clock"></i> Heures de Pointe</h3>
                            </div>
                            <div id="heures-pointe" class="analytics-list">
                                <!-- Liste dynamique -->
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>
</body>
</html>
